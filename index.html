<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Souvenir Shop - M√πa Y√™u Th∆∞∆°ng</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Quicksand:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <div id="sakura-container"></div>
    <canvas id="constellation"></canvas>

    <header class="main-header" id="header-bar">
        <div class="language-switcher">
            <button class="lang-btn active" data-lang="vi" onclick="changeLanguage('vi')" title="Ti·∫øng Vi·ªát">
                üáªüá≥ VI
            </button>
            <button class="lang-btn" data-lang="en" onclick="changeLanguage('en')" title="English">
                üá¨üáß EN
            </button>
            <button class="lang-btn" data-lang="ja" onclick="changeLanguage('ja')" title="Êó•Êú¨Ë™û">
                üáØüáµ JA
            </button>
        </div>
        <div class="search-box">
            <input type="text" id="order-search-input" placeholder="Nh·∫≠p m√£ ƒë∆°n (8 s·ªë)"
                data-i18n="header.search.placeholder" maxlength="8">
            <button onclick="checkOrder()"><i class="fas fa-search"></i> <span data-i18n="header.search.button">Tra
                    c·ª©u</span></button>
        </div>
    </header>

    <button id="back-home-btn" class="hidden" onclick="goHome()"><i class="fas fa-heart"></i> <span
            data-i18n="header.backHome">Trang ch·ªß</span></button>

    <main id="home-page">
        <section class="hero-section curved-bg">
            <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=1200" alt="Shop Banner"
                class="hero-img">
            <h1 class="shop-name floating-text" data-i18n="hero.title">Ti·ªám L∆∞u Ni·ªám B·ªën M√πa</h1>
        </section>

        <section class="seasons-nav">
            <div class="season-card spring-card" onclick="showPasswordModal('spring')">
                <img src="https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=400" alt="Xu√¢n">
                <span class="season-text" data-i18n="season.spring">Xu√¢n Th√¨</span>
                <div class="secret-hint"><i class="fas fa-lock"></i> <span data-i18n="season.secret">B√≠ m·∫≠t</span></div>
            </div>
            <div class="season-card summer-card" onclick="showPasswordModal('summer')">
                <img src="https://images.unsplash.com/photo-1504194921103-98a190533f81?w=400" alt="H·∫°">
                <span class="season-text" data-i18n="season.summer">H·∫° N·ªìng</span>
                <div class="secret-hint"><i class="fas fa-lock"></i> <span data-i18n="season.secret">B√≠ m·∫≠t</span></div>
            </div>
            <div class="season-card autumn-card" onclick="showPasswordModal('autumn')">
                <img src="https://images.unsplash.com/photo-1509565840034-3c385bbe6451?w=400" alt="Thu">
                <span class="season-text" data-i18n="season.autumn">Thu Phai</span>
                <div class="secret-hint"><i class="fas fa-lock"></i> <span data-i18n="season.secret">B√≠ m·∫≠t</span></div>
            </div>
            <div class="season-card winter-card" onclick="showPasswordModal('winter')">
                <img src="https://images.unsplash.com/photo-1483664852095-d6cc687070ef?w=400" alt="ƒê√¥ng">
                <span class="season-text" data-i18n="season.winter">ƒê√¥ng L·∫°nh</span>
                <div class="secret-hint"><i class="fas fa-lock"></i> <span data-i18n="season.secret">B√≠ m·∫≠t</span></div>
            </div>
        </section>

        <section class="products-section">
            <h2 class="fancy-title" data-i18n="products.title">B·ªô S∆∞u T·∫≠p K√Ω ·ª®c</h2>
            <div class="product-grid" id="product-list"></div>
        </section>

        <section class="vietnam-seasons-info">
            <h2 class="fancy-title" data-i18n="seasons.title">H∆∞∆°ng S·∫Øc Vi·ªát Nam</h2>

            <div class="vn-season-row" id="vn-spring">
                <div class="vn-content">
                    <h3 data-i18n="seasons.spring.title">M√πa Xu√¢n</h3>
                    <p data-i18n="seasons.spring.desc">ƒê√†o phai khoe s·∫Øc, m∆∞a ph√πn bay l·∫•t ph·∫•t tr√™n ph·ªë c·ªï H√† N·ªôi. M√πa
                        c·ªßa s·ª± kh·ªüi ƒë·∫ßu m·ªõi m·∫ª.</p>
                </div>
                <div class="vn-images">
                    <img src="https://images.unsplash.com/photo-1550596334-7bb40a71b6bc?w=500" class="img-style-1">
                    <img src="https://images.unsplash.com/photo-1582450871972-ab5ca641643d?w=500" class="img-style-2">
                </div>
            </div>

            <div class="vn-season-row reverse" id="vn-summer">
                <div class="vn-images">
                    <img src="https://images.unsplash.com/photo-1504194921103-98a190533f81?w=500" class="img-style-1">
                    <img src="https://images.unsplash.com/photo-1559592413-7cec4d0ea49b?w=500" class="img-style-2">
                </div>
                <div class="vn-content">
                    <h3 data-i18n="seasons.summer.title">M√πa H·∫°</h3>
                    <p data-i18n="seasons.summer.desc">Ph∆∞·ª£ng vƒ© ƒë·ªè r·ª±c g√≥c tr·ªùii, ti·∫øng ve ng√¢n vang g·ªçi h√® v·ªÅ. Bi·ªÉn
                        xanh v·∫´y g·ªçi.</p>
                </div>
            </div>

            <div class="vn-season-row" id="vn-autumn">
                <div class="vn-content">
                    <h3 data-i18n="seasons.autumn.title">M√πa Thu</h3>
                    <p data-i18n="seasons.autumn.desc">H∆∞∆°ng c·ªëm m·ªõi, l√° v√†ng r∆°i x√†o x·∫°c, m√πa thu ƒë·∫πp nh∆∞ m·ªôt b·∫£n t√¨nh
                        ca l√£ng m·∫°n.</p>
                </div>
                <div class="vn-images">
                    <img src="https://images.unsplash.com/photo-1509565840034-3c385bbe6451?w=500" class="img-style-1">
                    <img src="https://images.unsplash.com/photo-1477414348463-c0eb7f1359b6?w=500" class="img-style-2">
                </div>
            </div>

            <div class="vn-season-row reverse" id="vn-winter">
                <div class="vn-images">
                    <img src="https://images.unsplash.com/photo-1483664852095-d6cc687070ef?w=500" class="img-style-1">
                    <img src="https://images.unsplash.com/photo-1516714819001-8ee7a13b71d7?w=500" class="img-style-2">
                </div>
                <div class="vn-content">
                    <h3 data-i18n="seasons.winter.title">M√πa ƒê√¥ng</h3>
                    <p data-i18n="seasons.winter.desc">Gi√≥ m√πa ƒë√¥ng b·∫Øc, b·∫øp l·ª≠a h·ªìng s∆∞·ªüi ·∫•m nh·ªØng b√†n tay l·∫°nh. S·ª±
                        tƒ©nh l·∫∑ng ƒë·∫ßy ch·∫•t th∆°.</p>
                </div>
            </div>
        </section>

        <footer class="site-footer">
            <p data-i18n="footer.copyright">¬© 2026 M√πa Y√™u Th∆∞∆°ng. All rights reserved.</p>
            <div class="admin-access-box" onclick="showAdminLogin()">
                <i class="fas fa-crown"></i> <span data-i18n="footer.admin">Khu V·ª±c Qu·∫£n L√Ω</span>
            </div>
        </footer>
    </main>

    <!-- Product Modal -->
    <div id="product-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">√ó</span>
            <div class="modal-body">
                <div class="media-section-wrapper" style="flex: 1.5;">
                    <div class="media-section">
                        <div class="slider-container">
                            <div class="slider-track" id="slider-track"></div>
                            <button class="slider-btn prev-btn" onclick="moveSlide(-1)">&#10094;</button>
                            <button class="slider-btn next-btn" onclick="moveSlide(1)">&#10095;</button>
                        </div>
                    </div>
                    <div class="season-selectors">
                        <button class="season-btn" onclick="changeProductVersion('xuan')"
                            data-i18n="modal.season.spring">Xu√¢n</button>
                        <button class="season-btn" onclick="changeProductVersion('ha')"
                            data-i18n="modal.season.summer">H·∫°</button>
                        <button class="season-btn" onclick="changeProductVersion('thu')"
                            data-i18n="modal.season.autumn">Thu</button>
                        <button class="season-btn" onclick="changeProductVersion('dong')"
                            data-i18n="modal.season.winter">ƒê√¥ng</button>
                    </div>
                </div>

                <div class="info-section">
                    <h2 id="modal-title" class="fancy-title" style="font-size: 2.5rem;">T√™n S·∫£n Ph·∫©m</h2>
                    <hr style="border: 0; border-top: 1px dashed var(--dark-pink); margin: 10px 0;">
                    <p><strong><i class="fas fa-layer-group"></i> <span data-i18n="modal.material">Ch·∫•t
                                li·ªáu:</span></strong> <span id="modal-material"></span>
                    </p>
                    <p><strong><i class="fas fa-tools"></i> <span data-i18n="modal.method">C√°ch l√†m:</span></strong>
                        <span id="modal-method"></span>
                    </p>
                    <p><strong><i class="fas fa-star"></i> <span data-i18n="modal.meaning">√ù nghƒ©a:</span></strong>
                        <span id="modal-meaning"></span>
                    </p>

                    <div style="margin-top: auto;">
                        <p style="font-size: 0.9rem; font-style: italic; margin-bottom: 10px;"
                            data-i18n="modal.contact">Li√™n h·ªá ƒë·∫∑t h√†ng ngay:
                        </p>
                        <div class="contact-btns">
                            <a href="https://zalo.me" target="_blank" class="btn-zalo"><i
                                    class="fas fa-comment-dots"></i> Zalo</a>
                            <a href="https://facebook.com" target="_blank" class="btn-fb"><i
                                    class="fab fa-facebook-messenger"></i> Messenger</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Modal for Secret Pages -->
    <div id="password-modal" class="modal hidden">
        <div class="password-box fancy-box">
            <h2 class="fancy-title"><i class="fas fa-lock"></i> <span data-i18n="password.title">Nh·∫≠p M·∫≠t Kh·∫©u B√≠
                    M·∫≠t</span></h2>
            <p id="password-hint" style="margin-bottom: 15px; color: #666;"></p>
            <input type="password" id="secret-password-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..."
                data-i18n="password.placeholder">
            <button onclick="verifyPassword()" class="btn-verify-pass"><i class="fas fa-unlock"></i> <span
                    data-i18n="password.unlock">M·ªü Kh√≥a</span></button>
            <button class="btn-close-login" onclick="closePasswordModal()" data-i18n="password.close">ƒê√≥ng</button>
            <input type="hidden" id="target-season">
        </div>
    </div>

    <!-- Thank You Page -->
    <section id="thank-you-page" class="hidden page-section">
        <div class="thank-you-container">
            <h1 id="ty-title" class="fancy-title"></h1>
            <div id="ty-content" class="ty-message"></div>
            <div class="secret-message-display" id="secret-message-box" style="display: none;">
                <h3><i class="fas fa-envelope-open-text"></i> L·ªùii Nh·∫Øn B√≠ M·∫≠t</h3>
                <p id="secret-message-content"></p>
            </div>
            <h3>S·∫£n ph·∫©m b·∫°n ƒë√£ ch·ªçn</h3>
            <div id="ty-products" class="ty-product-list"></div>
            <div class="spotify-embed" id="ty-spotify"></div>
        </div>
    </section>

    <!-- Admin Login -->
    <div id="admin-login" class="modal hidden">
        <div class="login-box fancy-box">
            <h2 class="fancy-title">C·ªïng Qu·∫£n Tr·ªã</h2>
            <input type="password" id="admin-pass" placeholder="M·∫≠t kh·∫©u b√≠ m·∫≠t...">
            <button onclick="loginAdmin()">M·ªü C√°nh C·ª≠a</button>
            <button class="btn-close-login" onclick="closeLogin()">ƒê√≥ng</button>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <section id="admin-dashboard" class="hidden page-section">
        <h1 class="fancy-title">Qu·∫£n L√Ω ƒê∆°n H√†ng</h1>

        <div class="admin-panel">
            <div class="admin-form fancy-box">
                <h3><i class="fas fa-edit"></i> T·∫°o / S·ª≠a ƒê∆°n</h3>

                <div class="input-group">
                    <label>M√£ ƒê∆°n H√†ng (8 s·ªë)</label>
                    <div class="row-input">
                        <input type="text" id="adm-order-id" readonly placeholder="B·∫•m n√∫t t·∫°o m√£ ->">
                        <button onclick="generateRandomOrderId()" class="btn-generate"><i class="fas fa-random"></i> T·∫°o
                            M√£</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>Ti√™u ƒë·ªÅ l·ªùii ch√∫c</label>
                    <input type="text" id="adm-title" placeholder="VD: G·ª≠i ng∆∞·ªùii th∆∞∆°ng...">
                </div>

                <div class="input-group">
                    <label>N·ªôi dung l·ªùii ch√∫c</label>
                    <textarea id="adm-content" rows="3" placeholder="Vi·∫øt nh·ªØng l·ªùii c√≥ c√°nh..."></textarea>
                </div>

                <div class="input-group">
                    <label>L·ªùii nh·∫Øn b√≠ m·∫≠t (ch·ªâ ng∆∞·ªùii nh·∫≠n ƒë∆°n h√†ng xem ƒë∆∞·ª£c)</label>
                    <textarea id="adm-secret-message" rows="3" placeholder="L·ªùii nh·∫Øn b√≠ m·∫≠t..."></textarea>
                </div>

                <div class="input-group">
                    <label>Link nh·∫°c Spotify (Embed)</label>
                    <input type="text" id="adm-spotify" placeholder="Link embed spotify...">
                </div>

                <div class="input-group">
                    <label>Th√™m s·∫£n ph·∫©m v√†o ƒë∆°n</label>
                    <div class="row-input">
                        <select id="adm-product-select"></select>
                        <button onclick="addProductToSelection()" class="btn-add-prod"><i class="fas fa-plus"></i>
                            Th√™m</button>
                    </div>
                </div>

                <div class="selected-products-container">
                    <label>S·∫£n ph·∫©m ƒë√£ ch·ªçn (B·∫•m X ƒë·ªÉ x√≥a):</label>
                    <div id="selected-products-list" class="tags-input">
                        <span class="empty-msg">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</span>
                    </div>
                </div>

                <!-- Connection Status -->
                <div class="input-group">
                    <label><i class="fas fa-shield-alt"></i> Tr·∫°ng Th√°i K·∫øt N·ªëi</label>
                    <div class="connection-status">
                        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                            <div class="status-item">
                                <i class="fas fa-database"></i> Supabase:
                                <span id="supabase-status" class="badge">Checking...</span>
                            </div>
                            <div class="status-item">
                                <i class="fas fa-robot"></i> Groq API:
                                <span id="groq-status" class="badge">Checking...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- API Configuration -->
                <div class="input-group">
                    <label><i class="fas fa-key"></i> C·∫•u H√¨nh Groq API Key</label>
                    <div class="api-config-box">
                        <div id="api-status-display" style="margin-bottom: 10px; color: #e74c3c;">
                            <i class="fas fa-times-circle"></i> Ch∆∞a c·∫•u h√¨nh
                        </div>
                        <div class="row-input">
                            <input type="password" id="groq-api-key" placeholder="gsk_..." style="flex: 1;">
                            <button onclick="saveApiKey()" class="btn-save-api">
                                <i class="fas fa-save"></i> L∆∞u
                            </button>
                            <button onclick="testApiConnection()" class="btn-test-api">
                                <i class="fas fa-vial"></i> Test
                            </button>
                        </div>
                        <small style="color: #666; display: block; margin-top: 8px;">
                            <i class="fas fa-info-circle"></i> Key ƒë∆∞·ª£c l∆∞u v√†o Supabase Settings. Tr√™n Vercel, key c≈©ng
                            c·∫ßn ƒë∆∞·ª£c th√™m v√†o Environment Variables.
                        </small>
                    </div>
                </div>

                <div class="input-group">
                    <label><i class="fas fa-key"></i> M·∫≠t Kh·∫©u B√≠ M·∫≠t Theo M√πa</label>
                    <button onclick="generateSeasonPasswords()" class="btn-generate"
                        style="width: 100%; margin-bottom: 10px;">
                        <i class="fas fa-magic"></i> T·∫°o 4 M·∫≠t Kh·∫©u Cho C√°c M√πa
                    </button>

                    <div class="season-passwords-grid" id="season-passwords-container">
                        <div class="season-pass-box">
                            <h4><i class="fas fa-seedling" style="color: #10b981;"></i> Xu√¢n</h4>
                            <input type="text" id="pass-spring" readonly placeholder="Ch∆∞a t·∫°o">
                            <div id="qr-spring" class="qr-code"></div>
                        </div>
                        <div class="season-pass-box">
                            <h4><i class="fas fa-sun" style="color: #f59e0b;"></i> H·∫°</h4>
                            <input type="text" id="pass-summer" readonly placeholder="Ch∆∞a t·∫°o">
                            <div id="qr-summer" class="qr-code"></div>
                        </div>
                        <div class="season-pass-box">
                            <h4><i class="fas fa-leaf" style="color: #d35400;"></i> Thu</h4>
                            <input type="text" id="pass-autumn" readonly placeholder="Ch∆∞a t·∫°o">
                            <div id="qr-autumn" class="qr-code"></div>
                        </div>
                        <div class="season-pass-box">
                            <h4><i class="fas fa-snowflake" style="color: #0984e3;"></i> ƒê√¥ng</h4>
                            <input type="text" id="pass-winter" readonly placeholder="Ch∆∞a t·∫°o">
                            <div id="qr-winter" class="qr-code"></div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn-save" onclick="saveOrder()"><i class="fas fa-save"></i> L∆∞u ƒê∆°n H√†ng</button>
                    <button class="btn-clear" onclick="clearForm()"><i class="fas fa-eraser"></i> L√†m M·ªõi</button>
                </div>
            </div>

            <div class="admin-list fancy-box">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3><i class="fas fa-list"></i> Danh S√°ch ƒê∆°n (T·ª´ Supabase)</h3>
                    <button onclick="window.print()" class="btn-print no-print"><i class="fas fa-print"></i> In Danh
                        S√°ch</button>
                </div>

                <div class="table-responsive">
                    <table id="order-table">
                        <thead>
                            <tr>
                                <th>M√£ ƒê∆°n</th>
                                <th>Ti√™u ƒë·ªÅ</th>
                                <th>M·∫≠t kh·∫©u c√°c m√πa & QR</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <script src="js/config.js"></script>
    <script src="js/translations.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/script.js"></script>
</body>

</html>